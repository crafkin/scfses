{smcl}
{* *! version 0.0.1  12dec2017}{...}
{findalias asfradohelp}{...}
{vieweralsosee "" "--"}{...}
{vieweralsosee "[R] help" "help help"}{...}
{viewerjumpto "Syntax" "examplehelpfile##syntax"}{...}
{viewerjumpto "Description" "examplehelpfile##description"}{...}
{viewerjumpto "Options" "examplehelpfile##options"}{...}
{viewerjumpto "Remarks" "examplehelpfile##remarks"}{...}
{viewerjumpto "Examples" "examplehelpfile##examples"}{...}
{title:Title}

{phang}
{bf:scfses} {hline 2} Calculate distribution of a variable in the Survey of Consumer Finances

{marker syntax}{...}
{title:Syntax}

{p 8 17 2}
{cmdab:scfses}
{varlist}
{ifin}
{weight}
[{cmd:,} {it:options}]

{synoptset 20 tabbed}{...}
{synopthdr}
{synoptline}
{syntab:Main}

{synopt:{opt p(#)}} the desired percentile. The default is {cmd:q(50)}, which is the median (50th percentile). {p_end}
{synopt:{opt number:draws(#)}} number of bootstraps for within-variance. {p_end}
{synopt:{opt imp(#)}} number of implicates for between-variance. The default is {cmd:imp(5)}, which means the command 
                        uses all five implicates.{p_end}
{synopt:{opt impnm(name)}} name for variables containing the name of the implicate. The default name is rep. {p_end}
{synopt:{opt repnm(name)}} name for variables containing the number of draws in the i-th replicate. The default name is mm. {p_end}
{synopt:{opt repwt(name)}} name for variables containing the weights for draws in the i-th replicate. wt1b is the default; not invoked unless the program is already weighted. {p_end}
{synopt:{opt pctl(#)}} percentile for the confidence interval returned in r(table). The default is the 95% CI.{p_end}
{synopt:{opt nodofcorr}} turns off the degrees of freedom correction.{p_end}
{synoptline}
{p2colreset}{...}
{p 4 6 2}
{cmd:pweight}s are allowed; see {help weight}.

{marker description}{...}
{title:Description}

{pstd}
{cmd:scfses} calculates a given percentile of the distribution 
of the variable in {varlist}, the standard error on the 
variable, and a confidence interval, accounting for the data
structure in the Survey of Consumer Finances. For example, 
using {cmd:scfses}, one could compute the 25th percentile
 of a given asset or debt variable for some population in 
the SCF, as well as the standard error of that parameter.

{pstd}
To generate point estimates and standarad errors, the command follows guidance given by the Survey of Consumer Finances (with details below). 
The program also implements a degrees-of-freedom correction for confidence intervals, following Barnard and Rubin (1999). This degrees-of-freedom correction takes into account that some
 of the SCF data are imputed when computing confidence intervals. The option {cmd:nodofcorr} turns off this correction and just
 conducts testing against the normal distribution. 

{pstd}
It is recommended to use the survey weights contained in the SCF to obtain accurate point estimates. 

{pstd}
To invoke the command, one must specify: {p_end}
{pstd}
- The desired variable{p_end}
{pstd}
- The desired percentile {p_end}
{pstd}
- The name of the variable containing the implicate number (the default is rep) {p_end}
{pstd}
- The name of variables containing the replicate draws for each observation (the default is mm, e.g. mm50 contains the number of draws for each observation in the 50th replicate){p_end}
{pstd}
- (Technically optional) the variable containing the weights, using standard Stata syntax {p_end}
{pstd}
- (Technically optional) the name of variables containing the weights for the replicate draws (the default is wt1b, e.g. wt1b50 contains the weights for each observation in the 50th replicate). {p_end}

{marker options}{...}
{title:Options}

{dlgtab:Main}
{phang}
{opt p} specifies the desired percentile for the distribution of the variable. The desired percentile need not be an integer. The default percentile is 50, which means that if the option isn't invoked, the program will generate the median (50th percentile). 

{phang}
{opt number:draws} specifies the the number of replicate draws to be used for computation of within-variance. The default number is 200, which means that if the option is not invoked, the command will compute the within variance using 200 replicate draws.

{phang}
{opt format} requests that the summary statistics be displayed using
the display formats associated with the variables, rather than the default
{cmd:g} display format; see
{findalias frformats}.

{phang}
{opt separator(#)} specifies how often to insert separation lines
into the output.  The default is {cmd:separator(5)}, meaning that a
line is drawn after every 5 variables.  {cmd:separator(10)} would draw a line
after every 10 variables.  {cmd:separator(0)} suppresses the separation line.

{phang}
{opth generate(newvar)} creates {it:newvar} containing the whatever
values.


{marker remarks}{...}
{title:Remarks}

{pstd}
For detailed information on the whatever statistic, see {bf:[R] intro}.


{marker examples}{...}
{title:Examples}

{phang}{cmd:. whatever mpg weight}{p_end}

{phang}{cmd:. whatever mpg weight, meanonly}{p_end}
